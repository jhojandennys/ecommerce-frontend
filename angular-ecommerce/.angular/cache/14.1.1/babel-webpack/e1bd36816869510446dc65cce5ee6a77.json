{"ast":null,"code":"/*!\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { __awaiter, __decorate, __param, __metadata } from 'tslib';\nimport { InjectionToken, Component, Inject, Optional, Injector, Injectable, Input, Directive, TemplateRef, ViewContainerRef, VERSION, NgModule } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { OktaAuth, AuthSdkError, toRelativeUrl } from '@okta/okta-auth-js';\nimport { filter, mergeMap } from 'rxjs/operators';\nimport { BehaviorSubject } from 'rxjs';\nimport { compare } from 'compare-versions';\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@okta/okta-auth-js';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@angular/router';\nconst OKTA_CONFIG = new InjectionToken('okta.config.angular');\nconst OKTA_AUTH = new InjectionToken('okta.auth');\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nlet OktaCallbackComponent = class OktaCallbackComponent {\n  constructor(config, oktaAuth, injector) {\n    this.config = config;\n    this.oktaAuth = oktaAuth;\n    this.injector = injector;\n  }\n\n  ngOnInit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri\n        yield this.oktaAuth.handleLoginRedirect();\n      } catch (e) {\n        // Callback from social IDP. Show custom login page to continue.\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore Supports auth-js v5 & v6\n        const isInteractionRequiredError = this.oktaAuth.isInteractionRequiredError || this.oktaAuth.idx.isInteractionRequiredError;\n\n        if (isInteractionRequiredError(e) && this.injector) {\n          const {\n            onAuthResume,\n            onAuthRequired\n          } = this.config;\n          const callbackFn = onAuthResume || onAuthRequired;\n\n          if (callbackFn) {\n            callbackFn(this.oktaAuth, this.injector);\n            return;\n          }\n        }\n\n        this.error = e.toString();\n      }\n    });\n  }\n\n};\n\nOktaCallbackComponent.ɵfac = function OktaCallbackComponent_Factory(t) {\n  return new (t || OktaCallbackComponent)(ɵngcc0.ɵɵdirectiveInject(OKTA_CONFIG), ɵngcc0.ɵɵdirectiveInject(OKTA_AUTH), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector, 8));\n};\n\nOktaCallbackComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: OktaCallbackComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 2,\n  vars: 1,\n  template: function OktaCallbackComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\");\n      ɵngcc0.ɵɵtext(1);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵtextInterpolate(ctx.error);\n    }\n  },\n  encapsulation: 2\n});\nOktaCallbackComponent = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Inject(OKTA_AUTH)), __param(2, Optional()), __metadata(\"design:paramtypes\", [Object, OktaAuth, Injector])], OktaCallbackComponent);\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nlet OktaAuthGuard = class OktaAuthGuard {\n  constructor(config, oktaAuth, injector) {\n    this.config = config;\n    this.oktaAuth = oktaAuth;\n    this.injector = injector;\n\n    this.updateAuthStateListener = authState => {\n      if (!authState.isAuthenticated) {\n        this.handleLogin(this.state.url);\n      }\n    };\n\n    this.onAuthRequired = this.config.onAuthRequired; // Unsubscribe updateAuthStateListener when route change\n\n    const router = injector.get(Router);\n    router.events.pipe(filter(e => e instanceof NavigationStart && this.state && this.state.url !== e.url)).subscribe(() => {\n      this.oktaAuth.authStateManager.unsubscribe(this.updateAuthStateListener);\n    });\n  }\n\n  canLoad(route, segments) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n      const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n\n      if (isAuthenticated) {\n        return true;\n      }\n\n      const originalUri = segments[0].path;\n      yield this.handleLogin(originalUri);\n      return false;\n    });\n  }\n  /**\n   * Gateway for protected route. Returns true if there is a valid accessToken,\n   * otherwise it will cache the route and start the login flow.\n   * @param route\n   * @param state\n   */\n\n\n  canActivate(route, state) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // Track states for current route\n      this.state = state;\n      this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired; // Protect the route after accessing\n\n      this.oktaAuth.authStateManager.subscribe(this.updateAuthStateListener);\n      const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n\n      if (isAuthenticated) {\n        return true;\n      }\n\n      yield this.handleLogin(state.url);\n      return false;\n    });\n  }\n\n  canActivateChild(route, state) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.canActivate(route, state);\n    });\n  }\n\n  handleLogin(originalUri) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // Store the current path\n      this.oktaAuth.setOriginalUri(originalUri);\n\n      if (this.onAuthRequired) {\n        this.onAuthRequired(this.oktaAuth, this.injector);\n      } else {\n        this.oktaAuth.signInWithRedirect();\n      }\n    });\n  }\n\n};\n\nOktaAuthGuard.ɵfac = function OktaAuthGuard_Factory(t) {\n  return new (t || OktaAuthGuard)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(OKTA_AUTH), ɵngcc0.ɵɵinject(ɵngcc0.Injector));\n};\n\nOktaAuthGuard.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: OktaAuthGuard,\n  factory: function (t) {\n    return OktaAuthGuard.ɵfac(t);\n  }\n});\nOktaAuthGuard = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Inject(OKTA_AUTH)), __metadata(\"design:paramtypes\", [Object, OktaAuth, Injector])], OktaAuthGuard);\nconst defaultAuthState = {\n  isAuthenticated: false\n};\nlet OktaAuthStateService = class OktaAuthStateService {\n  constructor(oktaAuth) {\n    this.oktaAuth = oktaAuth;\n    this._authState = new BehaviorSubject(defaultAuthState); // only expose readonly property\n\n    this.authState$ = this._authState.asObservable();\n    this.updateAuthState = this.updateAuthState.bind(this); // set initial authState\n\n    const initialAuthState = this.oktaAuth.authStateManager.getAuthState() || defaultAuthState;\n\n    this._authState.next(initialAuthState); // subscribe to future changes\n\n\n    this.oktaAuth.authStateManager.subscribe(this.updateAuthState);\n  }\n\n  ngOnDestroy() {\n    this.oktaAuth.authStateManager.unsubscribe(this.updateAuthState);\n  } // Observes as true when any group input can match groups from user claims \n\n\n  hasAnyGroups(groups) {\n    return this.authState$.pipe(mergeMap(({\n      isAuthenticated,\n      idToken\n    }) => __awaiter(this, void 0, void 0, function* () {\n      // return false when not authenticated or openid is not in scopes\n      if (!isAuthenticated || !idToken) {\n        return false;\n      } // transform inputs to consistent object format\n\n\n      if (typeof groups === 'string') {\n        groups = {\n          groups: [groups]\n        };\n      }\n\n      if (Array.isArray(groups)) {\n        groups = {\n          groups\n        };\n      }\n\n      const key = Object.keys(groups)[0];\n      const value = groups[key]; // groups or custom claims is available in idToken\n\n      if (idToken.claims[key]) {\n        return value.some(authority => idToken.claims[key].includes(authority));\n      } // try /userinfo endpoint when thin idToken (no groups claim) is returned\n      // https://developer.okta.com/docs/concepts/api-access-management/#tokens-and-scopes\n\n\n      const userInfo = yield this.oktaAuth.getUser();\n\n      if (!userInfo[key]) {\n        return false;\n      }\n\n      return value.some(authority => userInfo[key].includes(authority));\n    })));\n  }\n\n  updateAuthState(authState) {\n    this._authState.next(authState);\n  }\n\n};\n\nOktaAuthStateService.ɵfac = function OktaAuthStateService_Factory(t) {\n  return new (t || OktaAuthStateService)(ɵngcc0.ɵɵinject(OKTA_AUTH));\n};\n\nOktaAuthStateService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: OktaAuthStateService,\n  factory: function (t) {\n    return OktaAuthStateService.ɵfac(t);\n  }\n});\nOktaAuthStateService = __decorate([__param(0, Inject(OKTA_AUTH)), __metadata(\"design:paramtypes\", [OktaAuth])], OktaAuthStateService);\nlet OktaHasAnyGroupDirective = class OktaHasAnyGroupDirective {\n  constructor( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  templateRef, viewContainer, authStateService) {\n    this.templateRef = templateRef;\n    this.viewContainer = viewContainer;\n    this.authStateService = authStateService;\n  }\n\n  set oktaHasAnyGroup(groups) {\n    this.authStateService.hasAnyGroups(groups).subscribe(isAuthorized => {\n      // don't update UI if no state change\n      if (isAuthorized === this.previousIsAuthorized) {\n        return;\n      }\n\n      this.previousIsAuthorized = isAuthorized;\n      this.viewContainer.clear();\n\n      if (isAuthorized) {\n        this.viewContainer.createEmbeddedView(this.templateRef);\n      }\n    });\n  }\n\n};\n\nOktaHasAnyGroupDirective.ɵfac = function OktaHasAnyGroupDirective_Factory(t) {\n  return new (t || OktaHasAnyGroupDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(OktaAuthStateService));\n};\n\nOktaHasAnyGroupDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: OktaHasAnyGroupDirective,\n  selectors: [[\"\", \"oktaHasAnyGroup\", \"\"]],\n  inputs: {\n    oktaHasAnyGroup: \"oktaHasAnyGroup\"\n  }\n});\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], OktaHasAnyGroupDirective.prototype, \"oktaHasAnyGroup\", null);\n\nOktaHasAnyGroupDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef, ViewContainerRef, OktaAuthStateService])], OktaHasAnyGroupDirective);\nvar packageInfo = {\n  'name': '@okta/okta-angular',\n  'version': '5.2.0',\n  'authJSMinSupportedVersion': '5.3.1'\n};\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction oktaAuthFactory(config) {\n  return config.oktaAuth;\n}\n\nlet OktaAuthModule = class OktaAuthModule {\n  constructor(config, location, router) {\n    const {\n      oktaAuth\n    } = config;\n    const isAuthJsSupported = oktaAuth._oktaUserAgent && compare(oktaAuth._oktaUserAgent.getVersion(), packageInfo.authJSMinSupportedVersion, '>=');\n\n    if (!isAuthJsSupported) {\n      throw new AuthSdkError(`Passed in oktaAuth is not compatible with the SDK, minimum supported okta-auth-js version is ${packageInfo.authJSMinSupportedVersion}.`);\n    } // Add Okta UA\n\n\n    oktaAuth._oktaUserAgent.addEnvironment(`${packageInfo.name}/${packageInfo.version}`);\n\n    oktaAuth._oktaUserAgent.addEnvironment(`Angular/${VERSION.full}`); // Provide a default implementation of `restoreOriginalUri`\n\n\n    if (!oktaAuth.options.restoreOriginalUri && router && location) {\n      oktaAuth.options.restoreOriginalUri = (_, originalUri) => __awaiter(this, void 0, void 0, function* () {\n        const baseUrl = window.location.origin + location.prepareExternalUrl('');\n        const routePath = toRelativeUrl(originalUri || '/', baseUrl);\n        router.navigateByUrl(routePath);\n      });\n    } // Start services\n\n\n    oktaAuth.start();\n  }\n\n};\n\nOktaAuthModule.ɵfac = function OktaAuthModule_Factory(t) {\n  return new (t || OktaAuthModule)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(ɵngcc2.Location, 8), ɵngcc0.ɵɵinject(ɵngcc3.Router, 8));\n};\n\nOktaAuthModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: OktaAuthModule\n});\nOktaAuthModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  providers: [OktaAuthGuard, OktaAuthStateService, {\n    provide: OKTA_AUTH,\n    useFactory: oktaAuthFactory,\n    deps: [OKTA_CONFIG]\n  }]\n});\nOktaAuthModule = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Optional()), __param(2, Optional()), __metadata(\"design:paramtypes\", [Object, Location, Router])], OktaAuthModule);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaCallbackComponent, [{\n    type: Component,\n    args: [{\n      template: `<div>{{error}}</div>`\n    }]\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }, {\n      type: ɵngcc0.Injector,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthGuard, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }, {\n      type: ɵngcc0.Injector\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthStateService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaHasAnyGroupDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[oktaHasAnyGroup]'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.TemplateRef\n    }, {\n      type: ɵngcc0.ViewContainerRef\n    }, {\n      type: OktaAuthStateService\n    }];\n  }, {\n    oktaHasAnyGroup: [{\n      type: Input\n    }]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n      exports: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n      providers: [OktaAuthGuard, OktaAuthStateService, {\n        provide: OKTA_AUTH,\n        useFactory: oktaAuthFactory,\n        deps: [OKTA_CONFIG]\n      }]\n    }]\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc2.Location,\n      decorators: [{\n        type: Optional\n      }]\n    }, {\n      type: ɵngcc3.Router,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(OktaAuthModule, {\n    declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n    exports: [OktaCallbackComponent, OktaHasAnyGroupDirective]\n  });\n})();\n\nexport { OKTA_AUTH, OKTA_CONFIG, OktaAuthGuard, OktaAuthModule, OktaAuthStateService, OktaCallbackComponent, oktaAuthFactory as ɵa, OktaHasAnyGroupDirective as ɵb };","map":{"version":3,"names":["__awaiter","__decorate","__param","__metadata","InjectionToken","Component","Inject","Optional","Injector","Injectable","Input","Directive","TemplateRef","ViewContainerRef","VERSION","NgModule","Router","NavigationStart","Location","OktaAuth","AuthSdkError","toRelativeUrl","filter","mergeMap","BehaviorSubject","compare","ɵngcc0","ɵngcc1","ɵngcc2","ɵngcc3","OKTA_CONFIG","OKTA_AUTH","OktaCallbackComponent","constructor","config","oktaAuth","injector","ngOnInit","handleLoginRedirect","e","isInteractionRequiredError","idx","onAuthResume","onAuthRequired","callbackFn","error","toString","ɵfac","OktaCallbackComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","template","OktaCallbackComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","encapsulation","Object","OktaAuthGuard","updateAuthStateListener","authState","isAuthenticated","handleLogin","state","url","router","get","events","pipe","subscribe","authStateManager","unsubscribe","canLoad","route","segments","data","originalUri","path","canActivate","canActivateChild","setOriginalUri","signInWithRedirect","OktaAuthGuard_Factory","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","defaultAuthState","OktaAuthStateService","_authState","authState$","asObservable","updateAuthState","bind","initialAuthState","getAuthState","next","ngOnDestroy","hasAnyGroups","groups","idToken","Array","isArray","key","keys","value","claims","some","authority","includes","userInfo","getUser","OktaAuthStateService_Factory","OktaHasAnyGroupDirective","templateRef","viewContainer","authStateService","oktaHasAnyGroup","isAuthorized","previousIsAuthorized","clear","createEmbeddedView","OktaHasAnyGroupDirective_Factory","ɵdir","ɵɵdefineDirective","inputs","prototype","packageInfo","oktaAuthFactory","OktaAuthModule","location","isAuthJsSupported","_oktaUserAgent","getVersion","authJSMinSupportedVersion","addEnvironment","name","version","full","options","restoreOriginalUri","_","baseUrl","window","origin","prepareExternalUrl","routePath","navigateByUrl","start","OktaAuthModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","provide","useFactory","deps","ngDevMode","ɵsetClassMetadata","args","decorators","selector","declarations","exports","ngJitMode","ɵɵsetNgModuleScope","ɵa","ɵb"],"sources":["/Users/jhojansobrino/Downloads/12-security-secure-communication-with-https-angular-environment-settings/03-frontend/angular-ecommerce/node_modules/@okta/okta-angular/__ivy_ngcc__/fesm2015/okta-angular.js"],"sourcesContent":["/*!\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { __awaiter, __decorate, __param, __metadata } from 'tslib';\nimport { InjectionToken, Component, Inject, Optional, Injector, Injectable, Input, Directive, TemplateRef, ViewContainerRef, VERSION, NgModule } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { OktaAuth, AuthSdkError, toRelativeUrl } from '@okta/okta-auth-js';\nimport { filter, mergeMap } from 'rxjs/operators';\nimport { BehaviorSubject } from 'rxjs';\nimport { compare } from 'compare-versions';\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@okta/okta-auth-js';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@angular/router';\nconst OKTA_CONFIG = new InjectionToken('okta.config.angular');\nconst OKTA_AUTH = new InjectionToken('okta.auth');\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nlet OktaCallbackComponent = class OktaCallbackComponent {\n    constructor(config, oktaAuth, injector) {\n        this.config = config;\n        this.oktaAuth = oktaAuth;\n        this.injector = injector;\n    }\n    ngOnInit() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri\n                yield this.oktaAuth.handleLoginRedirect();\n            }\n            catch (e) {\n                // Callback from social IDP. Show custom login page to continue.\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore Supports auth-js v5 & v6\n                const isInteractionRequiredError = this.oktaAuth.isInteractionRequiredError || this.oktaAuth.idx.isInteractionRequiredError;\n                if (isInteractionRequiredError(e) && this.injector) {\n                    const { onAuthResume, onAuthRequired } = this.config;\n                    const callbackFn = onAuthResume || onAuthRequired;\n                    if (callbackFn) {\n                        callbackFn(this.oktaAuth, this.injector);\n                        return;\n                    }\n                }\n                this.error = e.toString();\n            }\n        });\n    }\n};\nOktaCallbackComponent.ɵfac = function OktaCallbackComponent_Factory(t) { return new (t || OktaCallbackComponent)(ɵngcc0.ɵɵdirectiveInject(OKTA_CONFIG), ɵngcc0.ɵɵdirectiveInject(OKTA_AUTH), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector, 8)); };\nOktaCallbackComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: OktaCallbackComponent, selectors: [[\"ng-component\"]], decls: 2, vars: 1, template: function OktaCallbackComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\");\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.error);\n    } }, encapsulation: 2 });\nOktaCallbackComponent = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Inject(OKTA_AUTH)),\n    __param(2, Optional()),\n    __metadata(\"design:paramtypes\", [Object, OktaAuth,\n        Injector])\n], OktaCallbackComponent);\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nlet OktaAuthGuard = class OktaAuthGuard {\n    constructor(config, oktaAuth, injector) {\n        this.config = config;\n        this.oktaAuth = oktaAuth;\n        this.injector = injector;\n        this.updateAuthStateListener = (authState) => {\n            if (!authState.isAuthenticated) {\n                this.handleLogin(this.state.url);\n            }\n        };\n        this.onAuthRequired = this.config.onAuthRequired;\n        // Unsubscribe updateAuthStateListener when route change\n        const router = injector.get(Router);\n        router.events.pipe(filter((e) => e instanceof NavigationStart && this.state && this.state.url !== e.url)).subscribe(() => {\n            this.oktaAuth.authStateManager.unsubscribe(this.updateAuthStateListener);\n        });\n    }\n    canLoad(route, segments) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n            const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n            if (isAuthenticated) {\n                return true;\n            }\n            const originalUri = segments[0].path;\n            yield this.handleLogin(originalUri);\n            return false;\n        });\n    }\n    /**\n     * Gateway for protected route. Returns true if there is a valid accessToken,\n     * otherwise it will cache the route and start the login flow.\n     * @param route\n     * @param state\n     */\n    canActivate(route, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Track states for current route\n            this.state = state;\n            this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n            // Protect the route after accessing\n            this.oktaAuth.authStateManager.subscribe(this.updateAuthStateListener);\n            const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n            if (isAuthenticated) {\n                return true;\n            }\n            yield this.handleLogin(state.url);\n            return false;\n        });\n    }\n    canActivateChild(route, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.canActivate(route, state);\n        });\n    }\n    handleLogin(originalUri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Store the current path\n            this.oktaAuth.setOriginalUri(originalUri);\n            if (this.onAuthRequired) {\n                this.onAuthRequired(this.oktaAuth, this.injector);\n            }\n            else {\n                this.oktaAuth.signInWithRedirect();\n            }\n        });\n    }\n};\nOktaAuthGuard.ɵfac = function OktaAuthGuard_Factory(t) { return new (t || OktaAuthGuard)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(OKTA_AUTH), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nOktaAuthGuard.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: OktaAuthGuard, factory: function (t) { return OktaAuthGuard.ɵfac(t); } });\nOktaAuthGuard = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Inject(OKTA_AUTH)),\n    __metadata(\"design:paramtypes\", [Object, OktaAuth,\n        Injector])\n], OktaAuthGuard);\n\nconst defaultAuthState = {\n    isAuthenticated: false\n};\nlet OktaAuthStateService = class OktaAuthStateService {\n    constructor(oktaAuth) {\n        this.oktaAuth = oktaAuth;\n        this._authState = new BehaviorSubject(defaultAuthState);\n        // only expose readonly property\n        this.authState$ = this._authState.asObservable();\n        this.updateAuthState = this.updateAuthState.bind(this);\n        // set initial authState\n        const initialAuthState = this.oktaAuth.authStateManager.getAuthState() || defaultAuthState;\n        this._authState.next(initialAuthState);\n        // subscribe to future changes\n        this.oktaAuth.authStateManager.subscribe(this.updateAuthState);\n    }\n    ngOnDestroy() {\n        this.oktaAuth.authStateManager.unsubscribe(this.updateAuthState);\n    }\n    // Observes as true when any group input can match groups from user claims \n    hasAnyGroups(groups) {\n        return this.authState$.pipe(mergeMap(({ isAuthenticated, idToken }) => __awaiter(this, void 0, void 0, function* () {\n            // return false when not authenticated or openid is not in scopes\n            if (!isAuthenticated || !idToken) {\n                return false;\n            }\n            // transform inputs to consistent object format\n            if (typeof groups === 'string') {\n                groups = { groups: [groups] };\n            }\n            if (Array.isArray(groups)) {\n                groups = { groups };\n            }\n            const key = Object.keys(groups)[0];\n            const value = groups[key];\n            // groups or custom claims is available in idToken\n            if (idToken.claims[key]) {\n                return value.some((authority) => idToken.claims[key].includes(authority));\n            }\n            // try /userinfo endpoint when thin idToken (no groups claim) is returned\n            // https://developer.okta.com/docs/concepts/api-access-management/#tokens-and-scopes\n            const userInfo = yield this.oktaAuth.getUser();\n            if (!userInfo[key]) {\n                return false;\n            }\n            return value.some((authority) => userInfo[key].includes(authority));\n        })));\n    }\n    updateAuthState(authState) {\n        this._authState.next(authState);\n    }\n};\nOktaAuthStateService.ɵfac = function OktaAuthStateService_Factory(t) { return new (t || OktaAuthStateService)(ɵngcc0.ɵɵinject(OKTA_AUTH)); };\nOktaAuthStateService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: OktaAuthStateService, factory: function (t) { return OktaAuthStateService.ɵfac(t); } });\nOktaAuthStateService = __decorate([ __param(0, Inject(OKTA_AUTH)),\n    __metadata(\"design:paramtypes\", [OktaAuth])\n], OktaAuthStateService);\n\nlet OktaHasAnyGroupDirective = class OktaHasAnyGroupDirective {\n    constructor(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    templateRef, viewContainer, authStateService) {\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.authStateService = authStateService;\n    }\n    set oktaHasAnyGroup(groups) {\n        this.authStateService.hasAnyGroups(groups)\n            .subscribe(isAuthorized => {\n            // don't update UI if no state change\n            if (isAuthorized === this.previousIsAuthorized) {\n                return;\n            }\n            this.previousIsAuthorized = isAuthorized;\n            this.viewContainer.clear();\n            if (isAuthorized) {\n                this.viewContainer.createEmbeddedView(this.templateRef);\n            }\n        });\n    }\n};\nOktaHasAnyGroupDirective.ɵfac = function OktaHasAnyGroupDirective_Factory(t) { return new (t || OktaHasAnyGroupDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(OktaAuthStateService)); };\nOktaHasAnyGroupDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: OktaHasAnyGroupDirective, selectors: [[\"\", \"oktaHasAnyGroup\", \"\"]], inputs: { oktaHasAnyGroup: \"oktaHasAnyGroup\" } });\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [Object])\n], OktaHasAnyGroupDirective.prototype, \"oktaHasAnyGroup\", null);\nOktaHasAnyGroupDirective = __decorate([ __metadata(\"design:paramtypes\", [TemplateRef,\n        ViewContainerRef,\n        OktaAuthStateService])\n], OktaHasAnyGroupDirective);\n\nvar packageInfo = {\n    'name': '@okta/okta-angular',\n    'version': '5.2.0',\n    'authJSMinSupportedVersion': '5.3.1'\n};\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction oktaAuthFactory(config) {\n    return config.oktaAuth;\n}\nlet OktaAuthModule = class OktaAuthModule {\n    constructor(config, location, router) {\n        const { oktaAuth } = config;\n        const isAuthJsSupported = oktaAuth._oktaUserAgent && compare(oktaAuth._oktaUserAgent.getVersion(), packageInfo.authJSMinSupportedVersion, '>=');\n        if (!isAuthJsSupported) {\n            throw new AuthSdkError(`Passed in oktaAuth is not compatible with the SDK, minimum supported okta-auth-js version is ${packageInfo.authJSMinSupportedVersion}.`);\n        }\n        // Add Okta UA\n        oktaAuth._oktaUserAgent.addEnvironment(`${packageInfo.name}/${packageInfo.version}`);\n        oktaAuth._oktaUserAgent.addEnvironment(`Angular/${VERSION.full}`);\n        // Provide a default implementation of `restoreOriginalUri`\n        if (!oktaAuth.options.restoreOriginalUri && router && location) {\n            oktaAuth.options.restoreOriginalUri = (_, originalUri) => __awaiter(this, void 0, void 0, function* () {\n                const baseUrl = window.location.origin + location.prepareExternalUrl('');\n                const routePath = toRelativeUrl(originalUri || '/', baseUrl);\n                router.navigateByUrl(routePath);\n            });\n        }\n        // Start services\n        oktaAuth.start();\n    }\n};\nOktaAuthModule.ɵfac = function OktaAuthModule_Factory(t) { return new (t || OktaAuthModule)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(ɵngcc2.Location, 8), ɵngcc0.ɵɵinject(ɵngcc3.Router, 8)); };\nOktaAuthModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: OktaAuthModule });\nOktaAuthModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [\n        OktaAuthGuard,\n        OktaAuthStateService,\n        {\n            provide: OKTA_AUTH,\n            useFactory: oktaAuthFactory,\n            deps: [OKTA_CONFIG]\n        },\n    ] });\nOktaAuthModule = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Optional()),\n    __param(2, Optional()),\n    __metadata(\"design:paramtypes\", [Object, Location,\n        Router])\n], OktaAuthModule);\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaCallbackComponent, [{\n        type: Component,\n        args: [{\n                template: `<div>{{error}}</div>`\n            }]\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }, { type: ɵngcc0.Injector, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthGuard, [{\n        type: Injectable\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }, { type: ɵngcc0.Injector }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthStateService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaHasAnyGroupDirective, [{\n        type: Directive,\n        args: [{ selector: '[oktaHasAnyGroup]' }]\n    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: ɵngcc0.ViewContainerRef }, { type: OktaAuthStateService }]; }, { oktaHasAnyGroup: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    OktaCallbackComponent,\n                    OktaHasAnyGroupDirective,\n                ],\n                exports: [\n                    OktaCallbackComponent,\n                    OktaHasAnyGroupDirective,\n                ],\n                providers: [\n                    OktaAuthGuard,\n                    OktaAuthStateService,\n                    {\n                        provide: OKTA_AUTH,\n                        useFactory: oktaAuthFactory,\n                        deps: [OKTA_CONFIG]\n                    },\n                ]\n            }]\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc2.Location, decorators: [{\n                type: Optional\n            }] }, { type: ɵngcc3.Router, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(OktaAuthModule, { declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective], exports: [OktaCallbackComponent, OktaHasAnyGroupDirective] }); })();\n\nexport { OKTA_AUTH, OKTA_CONFIG, OktaAuthGuard, OktaAuthModule, OktaAuthStateService, OktaCallbackComponent, oktaAuthFactory as ɵa, OktaHasAnyGroupDirective as ɵb };\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,UAApB,EAAgCC,OAAhC,EAAyCC,UAAzC,QAA2D,OAA3D;AACA,SAASC,cAAT,EAAyBC,SAAzB,EAAoCC,MAApC,EAA4CC,QAA5C,EAAsDC,QAAtD,EAAgEC,UAAhE,EAA4EC,KAA5E,EAAmFC,SAAnF,EAA8FC,WAA9F,EAA2GC,gBAA3G,EAA6HC,OAA7H,EAAsIC,QAAtI,QAAsJ,eAAtJ;AACA,SAASC,MAAT,EAAiBC,eAAjB,QAAwC,iBAAxC;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,aAAjC,QAAsD,oBAAtD;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,gBAAjC;AACA,SAASC,eAAT,QAAgC,MAAhC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,KAAKC,MAAZ,MAAwB,eAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,oBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,iBAAxB;AACA,OAAO,KAAKC,MAAZ,MAAwB,iBAAxB;AACA,MAAMC,WAAW,GAAG,IAAI1B,cAAJ,CAAmB,qBAAnB,CAApB;AACA,MAAM2B,SAAS,GAAG,IAAI3B,cAAJ,CAAmB,WAAnB,CAAlB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAI4B,qBAAqB,GAAG,MAAMA,qBAAN,CAA4B;EACpDC,WAAW,CAACC,MAAD,EAASC,QAAT,EAAmBC,QAAnB,EAA6B;IACpC,KAAKF,MAAL,GAAcA,MAAd;IACA,KAAKC,QAAL,GAAgBA,QAAhB;IACA,KAAKC,QAAL,GAAgBA,QAAhB;EACH;;EACDC,QAAQ,GAAG;IACP,OAAOrC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChD,IAAI;QACA;QACA,MAAM,KAAKmC,QAAL,CAAcG,mBAAd,EAAN;MACH,CAHD,CAIA,OAAOC,CAAP,EAAU;QACN;QACA;QACA;QACA,MAAMC,0BAA0B,GAAG,KAAKL,QAAL,CAAcK,0BAAd,IAA4C,KAAKL,QAAL,CAAcM,GAAd,CAAkBD,0BAAjG;;QACA,IAAIA,0BAA0B,CAACD,CAAD,CAA1B,IAAiC,KAAKH,QAA1C,EAAoD;UAChD,MAAM;YAAEM,YAAF;YAAgBC;UAAhB,IAAmC,KAAKT,MAA9C;UACA,MAAMU,UAAU,GAAGF,YAAY,IAAIC,cAAnC;;UACA,IAAIC,UAAJ,EAAgB;YACZA,UAAU,CAAC,KAAKT,QAAN,EAAgB,KAAKC,QAArB,CAAV;YACA;UACH;QACJ;;QACD,KAAKS,KAAL,GAAaN,CAAC,CAACO,QAAF,EAAb;MACH;IACJ,CApBe,CAAhB;EAqBH;;AA5BmD,CAAxD;;AA8BAd,qBAAqB,CAACe,IAAtB,GAA6B,SAASC,6BAAT,CAAuCC,CAAvC,EAA0C;EAAE,OAAO,KAAKA,CAAC,IAAIjB,qBAAV,EAAiCN,MAAM,CAACwB,iBAAP,CAAyBpB,WAAzB,CAAjC,EAAwEJ,MAAM,CAACwB,iBAAP,CAAyBnB,SAAzB,CAAxE,EAA6GL,MAAM,CAACwB,iBAAP,CAAyBxB,MAAM,CAAClB,QAAhC,EAA0C,CAA1C,CAA7G,CAAP;AAAoK,CAA7O;;AACAwB,qBAAqB,CAACmB,IAAtB,GAA6B,aAAczB,MAAM,CAAC0B,iBAAP,CAAyB;EAAEC,IAAI,EAAErB,qBAAR;EAA+BsB,SAAS,EAAE,CAAC,CAAC,cAAD,CAAD,CAA1C;EAA8DC,KAAK,EAAE,CAArE;EAAwEC,IAAI,EAAE,CAA9E;EAAiFC,QAAQ,EAAE,SAASC,8BAAT,CAAwCC,EAAxC,EAA4CC,GAA5C,EAAiD;IAAE,IAAID,EAAE,GAAG,CAAT,EAAY;MACtNjC,MAAM,CAACmC,cAAP,CAAsB,CAAtB,EAAyB,KAAzB;MACAnC,MAAM,CAACoC,MAAP,CAAc,CAAd;MACApC,MAAM,CAACqC,YAAP;IACH;;IAAC,IAAIJ,EAAE,GAAG,CAAT,EAAY;MACVjC,MAAM,CAACsC,SAAP,CAAiB,CAAjB;MACAtC,MAAM,CAACuC,iBAAP,CAAyBL,GAAG,CAACf,KAA7B;IACH;EAAE,CAP6D;EAO3DqB,aAAa,EAAE;AAP4C,CAAzB,CAA3C;AAQAlC,qBAAqB,GAAG/B,UAAU,CAAC,CAAEC,OAAO,CAAC,CAAD,EAAII,MAAM,CAACwB,WAAD,CAAV,CAAT,EAC/B5B,OAAO,CAAC,CAAD,EAAII,MAAM,CAACyB,SAAD,CAAV,CADwB,EAE/B7B,OAAO,CAAC,CAAD,EAAIK,QAAQ,EAAZ,CAFwB,EAG/BJ,UAAU,CAAC,mBAAD,EAAsB,CAACgE,MAAD,EAAShD,QAAT,EAC5BX,QAD4B,CAAtB,CAHqB,CAAD,EAK/BwB,qBAL+B,CAAlC;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIoC,aAAa,GAAG,MAAMA,aAAN,CAAoB;EACpCnC,WAAW,CAACC,MAAD,EAASC,QAAT,EAAmBC,QAAnB,EAA6B;IACpC,KAAKF,MAAL,GAAcA,MAAd;IACA,KAAKC,QAAL,GAAgBA,QAAhB;IACA,KAAKC,QAAL,GAAgBA,QAAhB;;IACA,KAAKiC,uBAAL,GAAgCC,SAAD,IAAe;MAC1C,IAAI,CAACA,SAAS,CAACC,eAAf,EAAgC;QAC5B,KAAKC,WAAL,CAAiB,KAAKC,KAAL,CAAWC,GAA5B;MACH;IACJ,CAJD;;IAKA,KAAK/B,cAAL,GAAsB,KAAKT,MAAL,CAAYS,cAAlC,CAToC,CAUpC;;IACA,MAAMgC,MAAM,GAAGvC,QAAQ,CAACwC,GAAT,CAAa5D,MAAb,CAAf;IACA2D,MAAM,CAACE,MAAP,CAAcC,IAAd,CAAmBxD,MAAM,CAAEiB,CAAD,IAAOA,CAAC,YAAYtB,eAAb,IAAgC,KAAKwD,KAArC,IAA8C,KAAKA,KAAL,CAAWC,GAAX,KAAmBnC,CAAC,CAACmC,GAA3E,CAAzB,EAA0GK,SAA1G,CAAoH,MAAM;MACtH,KAAK5C,QAAL,CAAc6C,gBAAd,CAA+BC,WAA/B,CAA2C,KAAKZ,uBAAhD;IACH,CAFD;EAGH;;EACDa,OAAO,CAACC,KAAD,EAAQC,QAAR,EAAkB;IACrB,OAAOpF,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChD,KAAK2C,cAAL,GAAsBwC,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACE,IAAN,CAAW1C,cAAzB,IAA2C,KAAKA,cAAtE;MACA,MAAM4B,eAAe,GAAG,MAAM,KAAKpC,QAAL,CAAcoC,eAAd,EAA9B;;MACA,IAAIA,eAAJ,EAAqB;QACjB,OAAO,IAAP;MACH;;MACD,MAAMe,WAAW,GAAGF,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAhC;MACA,MAAM,KAAKf,WAAL,CAAiBc,WAAjB,CAAN;MACA,OAAO,KAAP;IACH,CATe,CAAhB;EAUH;EACD;AACJ;AACA;AACA;AACA;AACA;;;EACIE,WAAW,CAACL,KAAD,EAAQV,KAAR,EAAe;IACtB,OAAOzE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChD;MACA,KAAKyE,KAAL,GAAaA,KAAb;MACA,KAAK9B,cAAL,GAAsBwC,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACE,IAAN,CAAW1C,cAAzB,IAA2C,KAAKA,cAAtE,CAHgD,CAIhD;;MACA,KAAKR,QAAL,CAAc6C,gBAAd,CAA+BD,SAA/B,CAAyC,KAAKV,uBAA9C;MACA,MAAME,eAAe,GAAG,MAAM,KAAKpC,QAAL,CAAcoC,eAAd,EAA9B;;MACA,IAAIA,eAAJ,EAAqB;QACjB,OAAO,IAAP;MACH;;MACD,MAAM,KAAKC,WAAL,CAAiBC,KAAK,CAACC,GAAvB,CAAN;MACA,OAAO,KAAP;IACH,CAZe,CAAhB;EAaH;;EACDe,gBAAgB,CAACN,KAAD,EAAQV,KAAR,EAAe;IAC3B,OAAOzE,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChD,OAAO,KAAKwF,WAAL,CAAiBL,KAAjB,EAAwBV,KAAxB,CAAP;IACH,CAFe,CAAhB;EAGH;;EACDD,WAAW,CAACc,WAAD,EAAc;IACrB,OAAOtF,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChD;MACA,KAAKmC,QAAL,CAAcuD,cAAd,CAA6BJ,WAA7B;;MACA,IAAI,KAAK3C,cAAT,EAAyB;QACrB,KAAKA,cAAL,CAAoB,KAAKR,QAAzB,EAAmC,KAAKC,QAAxC;MACH,CAFD,MAGK;QACD,KAAKD,QAAL,CAAcwD,kBAAd;MACH;IACJ,CATe,CAAhB;EAUH;;AAlEmC,CAAxC;;AAoEAvB,aAAa,CAACrB,IAAd,GAAqB,SAAS6C,qBAAT,CAA+B3C,CAA/B,EAAkC;EAAE,OAAO,KAAKA,CAAC,IAAImB,aAAV,EAAyB1C,MAAM,CAACmE,QAAP,CAAgB/D,WAAhB,CAAzB,EAAuDJ,MAAM,CAACmE,QAAP,CAAgB9D,SAAhB,CAAvD,EAAmFL,MAAM,CAACmE,QAAP,CAAgBnE,MAAM,CAAClB,QAAvB,CAAnF,CAAP;AAA8H,CAAvL;;AACA4D,aAAa,CAAC0B,KAAd,GAAsB,aAAcpE,MAAM,CAACqE,kBAAP,CAA0B;EAAEC,KAAK,EAAE5B,aAAT;EAAwB6B,OAAO,EAAE,UAAUhD,CAAV,EAAa;IAAE,OAAOmB,aAAa,CAACrB,IAAd,CAAmBE,CAAnB,CAAP;EAA+B;AAA/E,CAA1B,CAApC;AACAmB,aAAa,GAAGnE,UAAU,CAAC,CAAEC,OAAO,CAAC,CAAD,EAAII,MAAM,CAACwB,WAAD,CAAV,CAAT,EACvB5B,OAAO,CAAC,CAAD,EAAII,MAAM,CAACyB,SAAD,CAAV,CADgB,EAEvB5B,UAAU,CAAC,mBAAD,EAAsB,CAACgE,MAAD,EAAShD,QAAT,EAC5BX,QAD4B,CAAtB,CAFa,CAAD,EAIvB4D,aAJuB,CAA1B;AAMA,MAAM8B,gBAAgB,GAAG;EACrB3B,eAAe,EAAE;AADI,CAAzB;AAGA,IAAI4B,oBAAoB,GAAG,MAAMA,oBAAN,CAA2B;EAClDlE,WAAW,CAACE,QAAD,EAAW;IAClB,KAAKA,QAAL,GAAgBA,QAAhB;IACA,KAAKiE,UAAL,GAAkB,IAAI5E,eAAJ,CAAoB0E,gBAApB,CAAlB,CAFkB,CAGlB;;IACA,KAAKG,UAAL,GAAkB,KAAKD,UAAL,CAAgBE,YAAhB,EAAlB;IACA,KAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB,CALkB,CAMlB;;IACA,MAAMC,gBAAgB,GAAG,KAAKtE,QAAL,CAAc6C,gBAAd,CAA+B0B,YAA/B,MAAiDR,gBAA1E;;IACA,KAAKE,UAAL,CAAgBO,IAAhB,CAAqBF,gBAArB,EARkB,CASlB;;;IACA,KAAKtE,QAAL,CAAc6C,gBAAd,CAA+BD,SAA/B,CAAyC,KAAKwB,eAA9C;EACH;;EACDK,WAAW,GAAG;IACV,KAAKzE,QAAL,CAAc6C,gBAAd,CAA+BC,WAA/B,CAA2C,KAAKsB,eAAhD;EACH,CAfiD,CAgBlD;;;EACAM,YAAY,CAACC,MAAD,EAAS;IACjB,OAAO,KAAKT,UAAL,CAAgBvB,IAAhB,CAAqBvD,QAAQ,CAAC,CAAC;MAAEgD,eAAF;MAAmBwC;IAAnB,CAAD,KAAkC/G,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;MAChH;MACA,IAAI,CAACuE,eAAD,IAAoB,CAACwC,OAAzB,EAAkC;QAC9B,OAAO,KAAP;MACH,CAJ+G,CAKhH;;;MACA,IAAI,OAAOD,MAAP,KAAkB,QAAtB,EAAgC;QAC5BA,MAAM,GAAG;UAAEA,MAAM,EAAE,CAACA,MAAD;QAAV,CAAT;MACH;;MACD,IAAIE,KAAK,CAACC,OAAN,CAAcH,MAAd,CAAJ,EAA2B;QACvBA,MAAM,GAAG;UAAEA;QAAF,CAAT;MACH;;MACD,MAAMI,GAAG,GAAG/C,MAAM,CAACgD,IAAP,CAAYL,MAAZ,EAAoB,CAApB,CAAZ;MACA,MAAMM,KAAK,GAAGN,MAAM,CAACI,GAAD,CAApB,CAbgH,CAchH;;MACA,IAAIH,OAAO,CAACM,MAAR,CAAeH,GAAf,CAAJ,EAAyB;QACrB,OAAOE,KAAK,CAACE,IAAN,CAAYC,SAAD,IAAeR,OAAO,CAACM,MAAR,CAAeH,GAAf,EAAoBM,QAApB,CAA6BD,SAA7B,CAA1B,CAAP;MACH,CAjB+G,CAkBhH;MACA;;;MACA,MAAME,QAAQ,GAAG,MAAM,KAAKtF,QAAL,CAAcuF,OAAd,EAAvB;;MACA,IAAI,CAACD,QAAQ,CAACP,GAAD,CAAb,EAAoB;QAChB,OAAO,KAAP;MACH;;MACD,OAAOE,KAAK,CAACE,IAAN,CAAYC,SAAD,IAAeE,QAAQ,CAACP,GAAD,CAAR,CAAcM,QAAd,CAAuBD,SAAvB,CAA1B,CAAP;IACH,CAzB+E,CAA5C,CAA7B,CAAP;EA0BH;;EACDhB,eAAe,CAACjC,SAAD,EAAY;IACvB,KAAK8B,UAAL,CAAgBO,IAAhB,CAAqBrC,SAArB;EACH;;AA/CiD,CAAtD;;AAiDA6B,oBAAoB,CAACpD,IAArB,GAA4B,SAAS4E,4BAAT,CAAsC1E,CAAtC,EAAyC;EAAE,OAAO,KAAKA,CAAC,IAAIkD,oBAAV,EAAgCzE,MAAM,CAACmE,QAAP,CAAgB9D,SAAhB,CAAhC,CAAP;AAAqE,CAA5I;;AACAoE,oBAAoB,CAACL,KAArB,GAA6B,aAAcpE,MAAM,CAACqE,kBAAP,CAA0B;EAAEC,KAAK,EAAEG,oBAAT;EAA+BF,OAAO,EAAE,UAAUhD,CAAV,EAAa;IAAE,OAAOkD,oBAAoB,CAACpD,IAArB,CAA0BE,CAA1B,CAAP;EAAsC;AAA7F,CAA1B,CAA3C;AACAkD,oBAAoB,GAAGlG,UAAU,CAAC,CAAEC,OAAO,CAAC,CAAD,EAAII,MAAM,CAACyB,SAAD,CAAV,CAAT,EAC9B5B,UAAU,CAAC,mBAAD,EAAsB,CAACgB,QAAD,CAAtB,CADoB,CAAD,EAE9BgF,oBAF8B,CAAjC;AAIA,IAAIyB,wBAAwB,GAAG,MAAMA,wBAAN,CAA+B;EAC1D3F,WAAW,EACX;EACA4F,WAFW,EAEEC,aAFF,EAEiBC,gBAFjB,EAEmC;IAC1C,KAAKF,WAAL,GAAmBA,WAAnB;IACA,KAAKC,aAAL,GAAqBA,aAArB;IACA,KAAKC,gBAAL,GAAwBA,gBAAxB;EACH;;EACkB,IAAfC,eAAe,CAAClB,MAAD,EAAS;IACxB,KAAKiB,gBAAL,CAAsBlB,YAAtB,CAAmCC,MAAnC,EACK/B,SADL,CACekD,YAAY,IAAI;MAC3B;MACA,IAAIA,YAAY,KAAK,KAAKC,oBAA1B,EAAgD;QAC5C;MACH;;MACD,KAAKA,oBAAL,GAA4BD,YAA5B;MACA,KAAKH,aAAL,CAAmBK,KAAnB;;MACA,IAAIF,YAAJ,EAAkB;QACd,KAAKH,aAAL,CAAmBM,kBAAnB,CAAsC,KAAKP,WAA3C;MACH;IACJ,CAXD;EAYH;;AArByD,CAA9D;;AAuBAD,wBAAwB,CAAC7E,IAAzB,GAAgC,SAASsF,gCAAT,CAA0CpF,CAA1C,EAA6C;EAAE,OAAO,KAAKA,CAAC,IAAI2E,wBAAV,EAAoClG,MAAM,CAACwB,iBAAP,CAAyBxB,MAAM,CAACd,WAAhC,CAApC,EAAkFc,MAAM,CAACwB,iBAAP,CAAyBxB,MAAM,CAACb,gBAAhC,CAAlF,EAAqIa,MAAM,CAACwB,iBAAP,CAAyBiD,oBAAzB,CAArI,CAAP;AAA8L,CAA7Q;;AACAyB,wBAAwB,CAACU,IAAzB,GAAgC,aAAc5G,MAAM,CAAC6G,iBAAP,CAAyB;EAAElF,IAAI,EAAEuE,wBAAR;EAAkCtE,SAAS,EAAE,CAAC,CAAC,EAAD,EAAK,iBAAL,EAAwB,EAAxB,CAAD,CAA7C;EAA4EkF,MAAM,EAAE;IAAER,eAAe,EAAE;EAAnB;AAApF,CAAzB,CAA9C;;AACA/H,UAAU,CAAC,CACPS,KAAK,EADE,EAEPP,UAAU,CAAC,aAAD,EAAgBgE,MAAhB,CAFH,EAGPhE,UAAU,CAAC,mBAAD,EAAsB,CAACgE,MAAD,CAAtB,CAHH,CAAD,EAIPyD,wBAAwB,CAACa,SAJlB,EAI6B,iBAJ7B,EAIgD,IAJhD,CAAV;;AAKAb,wBAAwB,GAAG3H,UAAU,CAAC,CAAEE,UAAU,CAAC,mBAAD,EAAsB,CAACS,WAAD,EAChEC,gBADgE,EAEhEsF,oBAFgE,CAAtB,CAAZ,CAAD,EAGlCyB,wBAHkC,CAArC;AAKA,IAAIc,WAAW,GAAG;EACd,QAAQ,oBADM;EAEd,WAAW,OAFG;EAGd,6BAA6B;AAHf,CAAlB;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,eAAT,CAAyBzG,MAAzB,EAAiC;EAC7B,OAAOA,MAAM,CAACC,QAAd;AACH;;AACD,IAAIyG,cAAc,GAAG,MAAMA,cAAN,CAAqB;EACtC3G,WAAW,CAACC,MAAD,EAAS2G,QAAT,EAAmBlE,MAAnB,EAA2B;IAClC,MAAM;MAAExC;IAAF,IAAeD,MAArB;IACA,MAAM4G,iBAAiB,GAAG3G,QAAQ,CAAC4G,cAAT,IAA2BtH,OAAO,CAACU,QAAQ,CAAC4G,cAAT,CAAwBC,UAAxB,EAAD,EAAuCN,WAAW,CAACO,yBAAnD,EAA8E,IAA9E,CAA5D;;IACA,IAAI,CAACH,iBAAL,EAAwB;MACpB,MAAM,IAAI1H,YAAJ,CAAkB,gGAA+FsH,WAAW,CAACO,yBAA0B,GAAvJ,CAAN;IACH,CALiC,CAMlC;;;IACA9G,QAAQ,CAAC4G,cAAT,CAAwBG,cAAxB,CAAwC,GAAER,WAAW,CAACS,IAAK,IAAGT,WAAW,CAACU,OAAQ,EAAlF;;IACAjH,QAAQ,CAAC4G,cAAT,CAAwBG,cAAxB,CAAwC,WAAUpI,OAAO,CAACuI,IAAK,EAA/D,EARkC,CASlC;;;IACA,IAAI,CAAClH,QAAQ,CAACmH,OAAT,CAAiBC,kBAAlB,IAAwC5E,MAAxC,IAAkDkE,QAAtD,EAAgE;MAC5D1G,QAAQ,CAACmH,OAAT,CAAiBC,kBAAjB,GAAsC,CAACC,CAAD,EAAIlE,WAAJ,KAAoBtF,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;QACnG,MAAMyJ,OAAO,GAAGC,MAAM,CAACb,QAAP,CAAgBc,MAAhB,GAAyBd,QAAQ,CAACe,kBAAT,CAA4B,EAA5B,CAAzC;QACA,MAAMC,SAAS,GAAGxI,aAAa,CAACiE,WAAW,IAAI,GAAhB,EAAqBmE,OAArB,CAA/B;QACA9E,MAAM,CAACmF,aAAP,CAAqBD,SAArB;MACH,CAJkE,CAAnE;IAKH,CAhBiC,CAiBlC;;;IACA1H,QAAQ,CAAC4H,KAAT;EACH;;AApBqC,CAA1C;;AAsBAnB,cAAc,CAAC7F,IAAf,GAAsB,SAASiH,sBAAT,CAAgC/G,CAAhC,EAAmC;EAAE,OAAO,KAAKA,CAAC,IAAI2F,cAAV,EAA0BlH,MAAM,CAACmE,QAAP,CAAgB/D,WAAhB,CAA1B,EAAwDJ,MAAM,CAACmE,QAAP,CAAgBjE,MAAM,CAACV,QAAvB,EAAiC,CAAjC,CAAxD,EAA6FQ,MAAM,CAACmE,QAAP,CAAgBhE,MAAM,CAACb,MAAvB,EAA+B,CAA/B,CAA7F,CAAP;AAAyI,CAApM;;AACA4H,cAAc,CAACqB,IAAf,GAAsB,aAAcvI,MAAM,CAACwI,gBAAP,CAAwB;EAAE7G,IAAI,EAAEuF;AAAR,CAAxB,CAApC;AACAA,cAAc,CAACuB,IAAf,GAAsB,aAAczI,MAAM,CAAC0I,gBAAP,CAAwB;EAAEC,SAAS,EAAE,CACjEjG,aADiE,EAEjE+B,oBAFiE,EAGjE;IACImE,OAAO,EAAEvI,SADb;IAEIwI,UAAU,EAAE5B,eAFhB;IAGI6B,IAAI,EAAE,CAAC1I,WAAD;EAHV,CAHiE;AAAb,CAAxB,CAApC;AASA8G,cAAc,GAAG3I,UAAU,CAAC,CAAEC,OAAO,CAAC,CAAD,EAAII,MAAM,CAACwB,WAAD,CAAV,CAAT,EACxB5B,OAAO,CAAC,CAAD,EAAIK,QAAQ,EAAZ,CADiB,EAExBL,OAAO,CAAC,CAAD,EAAIK,QAAQ,EAAZ,CAFiB,EAGxBJ,UAAU,CAAC,mBAAD,EAAsB,CAACgE,MAAD,EAASjD,QAAT,EAC5BF,MAD4B,CAAtB,CAHc,CAAD,EAKxB4H,cALwB,CAA3B;;AAMA,CAAC,YAAY;EAAE,CAAC,OAAO6B,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD/I,MAAM,CAACgJ,iBAAP,CAAyB1I,qBAAzB,EAAgD,CAAC;IAC3GqB,IAAI,EAAEhD,SADqG;IAE3GsK,IAAI,EAAE,CAAC;MACClH,QAAQ,EAAG;IADZ,CAAD;EAFqG,CAAD,CAAhD,EAK1D,YAAY;IAAE,OAAO,CAAC;MAAEJ,IAAI,EAAEc,MAAR;MAAgByG,UAAU,EAAE,CAAC;QAC3CvH,IAAI,EAAE/C,MADqC;QAE3CqK,IAAI,EAAE,CAAC7I,WAAD;MAFqC,CAAD;IAA5B,CAAD,EAGX;MAAEuB,IAAI,EAAE1B,MAAM,CAACR,QAAf;MAAyByJ,UAAU,EAAE,CAAC;QACxCvH,IAAI,EAAE/C,MADkC;QAExCqK,IAAI,EAAE,CAAC5I,SAAD;MAFkC,CAAD;IAArC,CAHW,EAMX;MAAEsB,IAAI,EAAE3B,MAAM,CAAClB,QAAf;MAAyBoK,UAAU,EAAE,CAAC;QACxCvH,IAAI,EAAE9C;MADkC,CAAD;IAArC,CANW,CAAP;EAQF,CAb8C,EAa5C,IAb4C,CAAnD;AAae,CAb9B;;AAcA,CAAC,YAAY;EAAE,CAAC,OAAOkK,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD/I,MAAM,CAACgJ,iBAAP,CAAyBtG,aAAzB,EAAwC,CAAC;IACnGf,IAAI,EAAE5C;EAD6F,CAAD,CAAxC,EAE1D,YAAY;IAAE,OAAO,CAAC;MAAE4C,IAAI,EAAEc,MAAR;MAAgByG,UAAU,EAAE,CAAC;QAC3CvH,IAAI,EAAE/C,MADqC;QAE3CqK,IAAI,EAAE,CAAC7I,WAAD;MAFqC,CAAD;IAA5B,CAAD,EAGX;MAAEuB,IAAI,EAAE1B,MAAM,CAACR,QAAf;MAAyByJ,UAAU,EAAE,CAAC;QACxCvH,IAAI,EAAE/C,MADkC;QAExCqK,IAAI,EAAE,CAAC5I,SAAD;MAFkC,CAAD;IAArC,CAHW,EAMX;MAAEsB,IAAI,EAAE3B,MAAM,CAAClB;IAAf,CANW,CAAP;EAMyB,CARmB,EAQjB,IARiB,CAAnD;AAQ0C,CARzD;;AASA,CAAC,YAAY;EAAE,CAAC,OAAOiK,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD/I,MAAM,CAACgJ,iBAAP,CAAyBvE,oBAAzB,EAA+C,CAAC;IAC1G9C,IAAI,EAAE5C;EADoG,CAAD,CAA/C,EAE1D,YAAY;IAAE,OAAO,CAAC;MAAE4C,IAAI,EAAE1B,MAAM,CAACR,QAAf;MAAyByJ,UAAU,EAAE,CAAC;QACpDvH,IAAI,EAAE/C,MAD8C;QAEpDqK,IAAI,EAAE,CAAC5I,SAAD;MAF8C,CAAD;IAArC,CAAD,CAAP;EAGF,CAL8C,EAK5C,IAL4C,CAAnD;AAKe,CAL9B;;AAMA,CAAC,YAAY;EAAE,CAAC,OAAO0I,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD/I,MAAM,CAACgJ,iBAAP,CAAyB9C,wBAAzB,EAAmD,CAAC;IAC9GvE,IAAI,EAAE1C,SADwG;IAE9GgK,IAAI,EAAE,CAAC;MAAEE,QAAQ,EAAE;IAAZ,CAAD;EAFwG,CAAD,CAAnD,EAG1D,YAAY;IAAE,OAAO,CAAC;MAAExH,IAAI,EAAE3B,MAAM,CAACd;IAAf,CAAD,EAA+B;MAAEyC,IAAI,EAAE3B,MAAM,CAACb;IAAf,CAA/B,EAAkE;MAAEwC,IAAI,EAAE8C;IAAR,CAAlE,CAAP;EAA2G,CAH/D,EAGiE;IAAE6B,eAAe,EAAE,CAAC;MAC3I3E,IAAI,EAAE3C;IADqI,CAAD;EAAnB,CAHjE,CAAnD;AAKC,CALhB;;AAMA,CAAC,YAAY;EAAE,CAAC,OAAO+J,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmD/I,MAAM,CAACgJ,iBAAP,CAAyB9B,cAAzB,EAAyC,CAAC;IACpGvF,IAAI,EAAEtC,QAD8F;IAEpG4J,IAAI,EAAE,CAAC;MACCG,YAAY,EAAE,CACV9I,qBADU,EAEV4F,wBAFU,CADf;MAKCmD,OAAO,EAAE,CACL/I,qBADK,EAEL4F,wBAFK,CALV;MASCyC,SAAS,EAAE,CACPjG,aADO,EAEP+B,oBAFO,EAGP;QACImE,OAAO,EAAEvI,SADb;QAEIwI,UAAU,EAAE5B,eAFhB;QAGI6B,IAAI,EAAE,CAAC1I,WAAD;MAHV,CAHO;IATZ,CAAD;EAF8F,CAAD,CAAzC,EAqB1D,YAAY;IAAE,OAAO,CAAC;MAAEuB,IAAI,EAAEc,MAAR;MAAgByG,UAAU,EAAE,CAAC;QAC3CvH,IAAI,EAAE/C,MADqC;QAE3CqK,IAAI,EAAE,CAAC7I,WAAD;MAFqC,CAAD;IAA5B,CAAD,EAGX;MAAEuB,IAAI,EAAEzB,MAAM,CAACV,QAAf;MAAyB0J,UAAU,EAAE,CAAC;QACxCvH,IAAI,EAAE9C;MADkC,CAAD;IAArC,CAHW,EAKX;MAAE8C,IAAI,EAAExB,MAAM,CAACb,MAAf;MAAuB4J,UAAU,EAAE,CAAC;QACtCvH,IAAI,EAAE9C;MADgC,CAAD;IAAnC,CALW,CAAP;EAOF,CA5B8C,EA4B5C,IA5B4C,CAAnD;AA4Be,CA5B9B;;AA6BA,CAAC,YAAY;EAAE,CAAC,OAAOyK,SAAP,KAAqB,WAArB,IAAoCA,SAArC,KAAmDtJ,MAAM,CAACuJ,kBAAP,CAA0BrC,cAA1B,EAA0C;IAAEkC,YAAY,EAAE,CAAC9I,qBAAD,EAAwB4F,wBAAxB,CAAhB;IAAmEmD,OAAO,EAAE,CAAC/I,qBAAD,EAAwB4F,wBAAxB;EAA5E,CAA1C,CAAnD;AAAgO,CAA/O;;AAEA,SAAS7F,SAAT,EAAoBD,WAApB,EAAiCsC,aAAjC,EAAgDwE,cAAhD,EAAgEzC,oBAAhE,EAAsFnE,qBAAtF,EAA6G2G,eAAe,IAAIuC,EAAhI,EAAoItD,wBAAwB,IAAIuD,EAAhK"},"metadata":{},"sourceType":"module"}